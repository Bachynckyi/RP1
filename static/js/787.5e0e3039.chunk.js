"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[787],{8787:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var n=r(9439),i=r(2791),u=r(4925),a=r(1413),c=r(3329),s=function(e){var t=e.product,r=e.updateOrder,u=e._id,s=e.updatedQuantity,o=t.title,l=t.photo,d=t.price,f=t.type,m=t.color,p=t.code,h=(0,i.useState)({}),j=(0,n.Z)(h,2),g=j[0],x=j[1],S=(0,i.useState)(),y=(0,n.Z)(S,2),v=y[0],b=y[1],O=JSON.parse(localStorage.getItem("order"));(0,i.useEffect)((function(){var e=O.filter((function(e){return e._id===u})),t=Number(e[0].quantity);x(t),b(d*t)}),[O,d,u]);var N=function(e){if("increment"===e.target.name)if(""===g){var t=O.map((function(e){return e._id===u?(0,a.Z)((0,a.Z)({},e),{},{quantity:""}):e}));localStorage.setItem("order",JSON.stringify(t)),x(""),s()}else{var r=O.map((function(e){return e._id===u?(0,a.Z)((0,a.Z)({},e),{},{quantity:String(Number(e.quantity)+1)}):e}));localStorage.setItem("order",JSON.stringify(r)),x(String(Number(g)+1)),s()}else if("decrement"===e.target.name){if(g>0){var n=O.map((function(e){return e._id===u?(0,a.Z)((0,a.Z)({},e),{},{quantity:String(Number(e.quantity)-1)}):e}));localStorage.setItem("order",JSON.stringify(n)),x(String(Number(g)-1)),s()}}else if("quantity"===e.target.name){var i=e.target.value.replace(/\D+/g,"");if(0===i){var c=O.map((function(e){return e._id===u?(0,a.Z)((0,a.Z)({},e),{},{quantity:""}):e}));localStorage.setItem("order",JSON.stringify(c)),x(""),s()}else{var o=O.map((function(e){return e._id===u?(0,a.Z)((0,a.Z)({},e),{},{quantity:String(i)}):e}));localStorage.setItem("order",JSON.stringify(o)),x(String(i)),s()}}};return(0,c.jsxs)("li",{children:[(0,c.jsx)("h1",{children:o}),(0,c.jsx)("img",{src:l,alt:o}),(0,c.jsxs)("p",{children:["\u0426\u0456\u043d\u0430: ",d," \u0433\u0440\u043d"]}),(0,c.jsxs)("p",{children:["\u0424\u0430\u0441\u0443\u0432\u0430\u043d\u043d\u044f: ",f]}),(0,c.jsxs)("p",{children:["\u041a\u043e\u043b\u0456\u0440: ",m]}),(0,c.jsxs)("p",{children:["\u041a\u043e\u0434 \u0442\u043e\u0432\u0430\u0440\u0443: ",p]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("button",{type:"button",onClick:N,name:"decrement",children:"-"}),(0,c.jsx)("input",{value:g,name:"quantity",onChange:N,type:"text"}),(0,c.jsx)("button",{type:"button",onClick:N,name:"increment",children:"+"})]}),(0,c.jsx)("button",{onClick:function(){var e=JSON.parse(localStorage.getItem("order")).filter((function(e){return e._id!==u}));r(e)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437 \u043a\u043e\u0448\u0438\u043a\u0430"}),(0,c.jsxs)("p",{children:["\u0421\u0443\u043c\u0430: ",v," \u0433\u0440\u043d"]})]})},o=["_id"],l=function(e){var t=e.newOrder,r=(0,i.useState)(0),a=(0,n.Z)(r,2),l=a[0],d=a[1],f=(0,i.useState)(!1),m=(0,n.Z)(f,2),p=m[0],h=m[1],j=JSON.parse(localStorage.getItem("order"));(0,i.useEffect)((function(){d(j.reduce((function(e,t){return Number(e)+Number(t.price)*t.quantity}),"")),h(!1)}),[j,p]);var g=function(e){t(e)},x=function(){h(!0)},S=j.map((function(e){var t=e._id,r=(0,u.Z)(e,o);return(0,c.jsx)(s,{product:r,_id:t,updateOrder:g,updatedQuantity:x},t)}));return(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u0434\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),(0,c.jsx)("ol",{children:S}),(0,c.jsxs)("p",{children:["\u0421\u0443\u043c\u0430 \u0434\u043e \u0441\u043f\u043b\u0430\u0442\u0438: ",JSON.stringify(l)," \u0433\u0440\u043d"]})]})},d=function(){return(0,c.jsx)("div",{children:(0,c.jsxs)("form",{children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0456 \u0434\u0430\u043d\u0456"}),(0,c.jsxs)("label",{children:["\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435",(0,c.jsx)("input",{required:!0,name:"customerName"})]}),(0,c.jsxs)("label",{children:["\u0406\u043c'\u044f",(0,c.jsx)("input",{required:!0,name:"customerName"})]}),(0,c.jsxs)("label",{children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d",(0,c.jsx)("input",{required:!0,name:"customerPhone"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{children:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"}),(0,c.jsx)("div",{})]})]})})},f=function(){var e=(0,i.useState)({}),t=(0,n.Z)(e,2),r=t[0],u=t[1],a=(0,i.useState)({}),s=(0,n.Z)(a,2),o=s[0],f=s[1],m=(0,i.useState)(!1),p=(0,n.Z)(m,2),h=p[0],j=p[1];(0,i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("order"));null!==e&&u(e)}),[]);return console.log(o),(0,c.jsx)("div",{children:0!==Object.keys(r).length?(0,c.jsxs)("div",{children:[(0,c.jsx)(l,{basket:r,newOrder:function(e){u(e),localStorage.setItem("order",JSON.stringify(e))}}),!h&&(0,c.jsx)("button",{onClick:function(){var e=JSON.parse(localStorage.getItem("order"));f(e),j(!0)},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),h&&(0,c.jsx)("div",{children:(0,c.jsx)(d,{})})]}):(0,c.jsx)("p",{children:"\u041d\u0456\u0447\u043e\u0433\u043e \u043d\u0435\u043c\u0430\u0454 \u0432 \u043a\u043e\u0448\u0438\u043a\u0443"})})}},4925:function(e,t,r){function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{Z:function(){return n}})}}]);
//# sourceMappingURL=787.5e0e3039.chunk.js.map