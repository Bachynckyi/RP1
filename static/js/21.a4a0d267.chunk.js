"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[21],{5021:function(t,e,n){n.r(e),n.d(e,{default:function(){return j}});var r=n(7762),c=n(3433),a=n(9439),i=n(9434),o=n(2791),s=n(9325),l=n(220),u=n(9927),d=n(128),f=n(7689),p=n(5413),_=n(8383),m={product_container:"ProductPage_product_container__A1Dds",filter_container:"ProductPage_filter_container__ypU74",filters:"ProductPage_filters__bktwK",button_sort:"ProductPage_button_sort__HTXBI",filter_name:"ProductPage_filter_name__Dh3Ee",down_allow:"ProductPage_down_allow__xX6Pw",colorMenuActive:"ProductPage_colorMenuActive__TrEmU",menu_list:"ProductPage_menu_list__W+MVo",radio_button:"ProductPage_radio_button__TvCqS",custom_button:"ProductPage_custom_button__xAz+k",item_color:"ProductPage_item_color__ZyZOI",subtitle:"ProductPage_subtitle__yZMsl",colorMenu:"ProductPage_colorMenu__NZkEG",typeMenuActive:"ProductPage_typeMenuActive__r7E3U",typeMenu:"ProductPage_typeMenu__Mnj0X",button_cancel:"ProductPage_button_cancel__ixPl3",priceMenuActive:"ProductPage_priceMenuActive__UMbmo",priceMenu:"ProductPage_priceMenu__vbogn",icon_filter:"ProductPage_icon_filter__riGBd",button_scrollTop:"ProductPage_button_scrollTop__Q6NXF"},h=n(7692),v=n(458),y=n(7821),x=n.n(y),g=n(3853),b=n(3329),j=function(){var t=(0,f.UO)(),e=(0,i.I0)(),n=(0,i.v9)(s.h),y=t.subcategory,j=(0,o.useState)({}),N=(0,a.Z)(j,2),P=N[0],Z=N[1],O=(0,o.useState)({}),k=(0,a.Z)(O,2),M=k[0],w=k[1],S=(0,o.useState)({}),A=(0,a.Z)(S,2),C=A[0],E=A[1],F=(0,o.useState)(!1),T=(0,a.Z)(F,2),U=T[0],D=T[1],G=(0,f.s0)(),X=(0,f.UO)(),I=(0,o.useState)(!1),L=(0,a.Z)(I,2),B=L[0],q=L[1],z=(0,o.useState)(!1),H=(0,a.Z)(z,2),J=H[0],K=H[1],Q=(0,o.useState)(!1),R=(0,a.Z)(Q,2),V=R[0],W=R[1],Y=(0,o.useState)("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"),$=(0,a.Z)(Y,2),tt=$[0],et=$[1],nt=(0,o.useState)([]),rt=(0,a.Z)(nt,2),ct=rt[0],at=rt[1],it=(0,o.useState)([]),ot=(0,a.Z)(it,2),st=ot[0],lt=ot[1],ut=(0,o.useState)([]),dt=(0,a.Z)(ut,2),ft=dt[0],pt=dt[1],_t=(0,o.useState)([]),mt=(0,a.Z)(_t,2),ht=mt[0],vt=mt[1],yt=(0,o.useRef)(null);!function(t,e){var n=function(n){t.current&&!t.current.contains(n.target)&&e()};(0,o.useEffect)((function(){return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}))}(yt,(function(){K(!1),W(!1),q(!1)})),(0,o.useEffect)((function(){if(void 0!==X.id)try{e((0,l.gk)(X.id)).then((function(e){Z(e.payload.data[0]),D(!0),G("/catalog/".concat(t.category,"/").concat(t.subcategory,"/").concat(X.id))})),e((0,l.uP)(X.category)).then((function(t){var e=t.payload.data.map((function(t){return t.color})),n=e.filter((function(t,n){return e.indexOf(t)===n}));pt(n);var r=t.payload.data.map((function(t){return t.type})),a=r.filter((function(t,e){return r.indexOf(t)===e}));vt(a);var i=t.payload.data.filter((function(t){return!0===t.active}));w(i);var o=(0,c.Z)(i).sort((function(t,e){return t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")-e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")}));E(o)}))}catch(n){console.log(n)}else if(void 0===y)try{e((0,l.uP)(X.category)).then((function(t){var e=t.payload.data.map((function(t){return t.color})),n=e.filter((function(t,n){return e.indexOf(t)===n}));pt(n);var r=t.payload.data.map((function(t){return t.type})),a=r.filter((function(t,e){return r.indexOf(t)===e}));vt(a);var i=t.payload.data.filter((function(t){return!0===t.active}));w(i);var o=(0,c.Z)(i).sort((function(t,e){return t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")-e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")}));E(o)}))}catch(n){console.log(n)}else try{e((0,l.uP)(y)).then((function(t){var e=t.payload.data.map((function(t){return t.color})),n=e.filter((function(t,n){return e.indexOf(t)===n}));pt(n);var r=t.payload.data.map((function(t){return t.type})),a=r.filter((function(t,e){return r.indexOf(t)===e}));vt(a);var i=t.payload.data.filter((function(t){return!0===t.active}));w(i);var o=(0,c.Z)(i).sort((function(t,e){return t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")-e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")}));E(o)}))}catch(n){console.log(n)}}),[e,y]),(0,o.useEffect)((function(){if(0!==Object.keys(M).length)if(0===ct.length&&0===st.length){var t=(0,c.Z)(M).sort((function(t,e){return t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")-e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")}));E(t)}else if(0===ct.length&&st.length>0){var e,n=[],a=(0,r.Z)(st);try{var i=function(){var t=e.value,r=M.filter((function(e){return e.type===t}));n.push.apply(n,(0,c.Z)(r))};for(a.s();!(e=a.n()).done;)i()}catch(N){a.e(N)}finally{a.f()}if("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"!==tt){if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===tt){var o=[].concat(n).sort((function(t,e){return t.price-e.price}));E(o)}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===tt){var s=[].concat(n).sort((function(t,e){return e.price-t.price}));E(s)}}else E(n)}else if(0===st.length&&ct.length>0){var l,u=[],d=(0,r.Z)(ct);try{var f=function(){var t=l.value,e=M.filter((function(e){return e.color===t}));u.push.apply(u,(0,c.Z)(e))};for(d.s();!(l=d.n()).done;)f()}catch(N){d.e(N)}finally{d.f()}if("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"!==tt){if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===tt){var p=[].concat(u).sort((function(t,e){return t.price-e.price}));E(p)}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===tt){var _=[].concat(u).sort((function(t,e){return e.price-t.price}));E(_)}}else E(u)}else if(st.length>0&&ct.length>0){var m,h=[],v=(0,r.Z)(ct);try{var y=function(){var t=m.value,e=M.filter((function(e){return e.color===t}));h.push.apply(h,(0,c.Z)(e))};for(v.s();!(m=v.n()).done;)y()}catch(N){v.e(N)}finally{v.f()}var x,g=[],b=(0,r.Z)(st);try{var j=function(){var t=x.value,e=h.filter((function(e){return e.type===t}));if(g.push.apply(g,(0,c.Z)(e)),"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"!==tt){if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===tt){var n=[].concat(g).sort((function(t,e){return t.price-e.price}));E(n)}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===tt){var r=[].concat(g).sort((function(t,e){return e.price-t.price}));E(r)}}else E(g)};for(b.s();!(x=b.n()).done;)j()}catch(N){b.e(N)}finally{b.f()}}}),[ct,st]);var xt=function(t){var e=t.target.value;if("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"===e){var n=(0,c.Z)(C).sort((function(t,e){return t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")-e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")}));E(n),et("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c")}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===e){var r=(0,c.Z)(C).sort((function(t,e){return e.price-t.price}));E(r),et("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445")}else if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===e){var a=(0,c.Z)(C).sort((function(t,e){return t.price-e.price}));E(a),et("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445")}},gt=function(t){var e=t.target.value;if(ct.includes(e)){var n=ct.filter((function(t){return t!==e}));at(n)}else 0===ct.length?at([e]):at([].concat((0,c.Z)(ct),[e]))},bt=function(t){var e=t.target.value;if(st.includes(e)){var n=st.filter((function(t){return t!==e}));lt(n)}else 0===st.length?lt([e]):lt([].concat((0,c.Z)(st),[e]))};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:m.container,children:!0===n?(0,b.jsx)(u.Z,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:m.product_container,children:[0!==Object.keys(C).length&&(0,b.jsxs)("div",{className:m.filter_container,ref:yt,children:[(0,b.jsxs)("div",{className:m.filters,children:[(0,b.jsxs)("p",{className:m.filter_name,children:[(0,b.jsx)(v.wrD,{className:m.icon_filter}),"\u0437\u0430 \u0446\u0456\u043d\u043e\u044e:"]}),(0,b.jsx)("button",{type:"button",onClick:function(){q(!B),K(!1),W(!1)},className:m.button_sort,children:(0,b.jsx)(h.G_S,{className:m.down_allow})}),B&&(0,b.jsx)("div",{className:B?m.priceMenuActive:m.priceMenu,children:(0,b.jsxs)("ul",{className:m.menu_list,children:[(0,b.jsxs)("li",{className:m.item_color,children:[(0,b.jsx)("input",{className:m.radio_button,type:"radio",value:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",name:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",id:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",onChange:xt,checked:tt.includes("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c")}),(0,b.jsx)("span",{className:m.custom_button}),(0,b.jsx)("label",{htmlFor:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",className:m.subtitle,children:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"})]}),(0,b.jsxs)("li",{className:m.item_color,children:[(0,b.jsx)("input",{className:m.radio_button,type:"radio",value:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",name:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",id:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",onChange:xt,checked:tt.includes("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445")}),(0,b.jsx)("span",{className:m.custom_button}),(0,b.jsx)("label",{htmlFor:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",className:m.subtitle,children:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"})]}),(0,b.jsxs)("li",{className:m.item_color,children:[(0,b.jsx)("input",{className:m.radio_button,type:"radio",value:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",name:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",id:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",onChange:xt,checked:tt.includes("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445")}),(0,b.jsx)("span",{className:m.custom_button}),(0,b.jsx)("label",{htmlFor:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",className:m.subtitle,children:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"})]})]})})]}),(0,b.jsxs)("div",{className:m.filters,children:[(0,b.jsxs)("p",{className:m.filter_name,children:[(0,b.jsx)(v.wrD,{className:m.icon_filter}),"\u0437\u0430 \u043a\u043e\u043b\u044c\u043e\u0440\u043e\u043c:"]}),(0,b.jsx)("button",{type:"button",className:m.button_sort,onClick:function(){K(!J),W(!1),q(!1)},children:(0,b.jsx)(h.G_S,{className:m.down_allow})}),(0,b.jsx)("div",{className:J?m.colorMenuActive:m.colorMenu,children:(0,b.jsx)("ul",{className:m.menu_list,children:ft.map((function(t){return(0,b.jsxs)("li",{className:m.item_color,children:[(0,b.jsx)("input",{className:m.radio_button,type:"checkbox",value:t,name:t,id:t,onChange:gt,checked:ct.includes(t)}),(0,b.jsx)("span",{className:m.custom_button}),(0,b.jsx)("label",{htmlFor:t,className:m.subtitle,children:t})]},t)}))})})]}),(0,b.jsxs)("div",{className:m.filters,children:[(0,b.jsxs)("p",{className:m.filter_name,children:[(0,b.jsx)(v.wrD,{className:m.icon_filter}),"\u0437\u0430 \u0444\u0430\u0441\u0443\u0432\u0430\u043d\u043d\u044f\u043c:"]}),(0,b.jsx)("button",{type:"button",className:m.button_sort,onClick:function(){W(!V),K(!1),q(!1)},children:(0,b.jsx)(h.G_S,{className:m.down_allow})}),(0,b.jsx)("div",{className:V?m.typeMenuActive:m.typeMenu,children:(0,b.jsx)("ul",{className:m.menu_list,children:ht.map((function(t){return(0,b.jsxs)("li",{className:m.item_color,children:[(0,b.jsx)("input",{className:m.radio_button,type:"checkbox",value:t,name:t,id:t,onChange:bt,checked:st.includes(t)}),(0,b.jsx)("span",{className:m.custom_button}),(0,b.jsx)("label",{htmlFor:t,className:m.subtitle,children:t})]},t)}))})})]}),(0,b.jsx)("button",{type:"button",className:m.button_cancel,onClick:function(){var t=(0,c.Z)(M).sort((function(t,e){return t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")-e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")}));E(t),et("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"),q(!1),at([]),K(!1),lt([]),W(!1)},children:"C\u043a\u0438\u043d\u0443\u0442\u0438 \u0432\u0441\u0456 \u0444\u0456\u043b\u044c\u0442\u0440\u0438"})]}),0!==Object.keys(C).length?(0,b.jsx)(d.Z,{productList:C,fetchProduct:function(e){Z(e),D(!0),void 0===t.subcategory?G("/catalog/".concat(t.category,"/").concat(t.category,"/").concat(e._id)):G("/catalog/".concat(t.category,"/").concat(t.subcategory,"/").concat(e._id))}}):(0,b.jsx)("p",{}),!U&&(0,b.jsx)(x(),{smooth:!0,className:m.button_scrollTop,component:(0,b.jsx)(g.OeJ,{style:{width:"100%",height:"100%"}})})]}),(0,b.jsx)(p.Z,{modalActive:U,setModalActive:D,product:P})]})}),(0,b.jsx)(_.Z,{})]})}},9325:function(t,e,n){n.d(e,{h:function(){return r}});var r=function(t){return t.product.loading}}}]);
//# sourceMappingURL=21.a4a0d267.chunk.js.map