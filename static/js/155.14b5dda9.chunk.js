"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[155],{5021:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var c=n(7762),r=n(3433),a=n(9439),i=n(9434),o=n(2791),s=n(9325),l=n(220),u=n(1831),d=n(128),f=n(7689),p=n(5413),_=n(8383),m={product_container:"ProductPage_product_container__A1Dds",filter_container:"ProductPage_filter_container__ypU74",filters:"ProductPage_filters__bktwK",button_sort:"ProductPage_button_sort__HTXBI",filter_name:"ProductPage_filter_name__Dh3Ee",down_allow:"ProductPage_down_allow__xX6Pw",colorMenuActive:"ProductPage_colorMenuActive__TrEmU",menu_list:"ProductPage_menu_list__W+MVo",radio_button:"ProductPage_radio_button__TvCqS",custom_button:"ProductPage_custom_button__xAz+k",item_color:"ProductPage_item_color__ZyZOI",subtitle:"ProductPage_subtitle__yZMsl",colorMenu:"ProductPage_colorMenu__NZkEG",typeMenuActive:"ProductPage_typeMenuActive__r7E3U",typeMenu:"ProductPage_typeMenu__Mnj0X",button_cancel:"ProductPage_button_cancel__ixPl3",priceMenuActive:"ProductPage_priceMenuActive__UMbmo",priceMenu:"ProductPage_priceMenu__vbogn",icon_filter:"ProductPage_icon_filter__riGBd"},h=n(7692),v=n(458),y=n(3329),g=function(){var e=(0,f.UO)(),t=(0,i.I0)(),n=(0,i.v9)(s.h),g=e.subcategory,x=(0,o.useState)({}),b=(0,a.Z)(x,2),j=b[0],N=b[1],P=(0,o.useState)({}),Z=(0,a.Z)(P,2),k=Z[0],M=Z[1],w=(0,o.useState)({}),O=(0,a.Z)(w,2),S=O[0],A=O[1],C=(0,o.useState)(!1),E=(0,a.Z)(C,2),F=E[0],U=E[1],D=(0,f.s0)(),G=(0,f.UO)(),I=(0,o.useState)(!1),L=(0,a.Z)(I,2),T=L[0],X=L[1],B=(0,o.useState)(!1),q=(0,a.Z)(B,2),z=q[0],H=q[1],K=(0,o.useState)(!1),R=(0,a.Z)(K,2),V=R[0],W=R[1],J=(0,o.useState)("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"),Q=(0,a.Z)(J,2),Y=Q[0],$=Q[1],ee=(0,o.useState)([]),te=(0,a.Z)(ee,2),ne=te[0],ce=te[1],re=(0,o.useState)([]),ae=(0,a.Z)(re,2),ie=ae[0],oe=ae[1],se=(0,o.useState)([]),le=(0,a.Z)(se,2),ue=le[0],de=le[1],fe=(0,o.useState)([]),pe=(0,a.Z)(fe,2),_e=pe[0],me=pe[1],he=(0,o.useRef)(null);!function(e,t){var n=function(n){e.current&&!e.current.contains(n.target)&&t()};(0,o.useEffect)((function(){return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}))}(he,(function(){H(!1),W(!1),X(!1)})),(0,o.useEffect)((function(){if(void 0!==G.id)try{t((0,l.gk)(G.id)).then((function(t){N(t.payload.data[0]),U(!0),D("/catalog/".concat(e.category,"/").concat(e.subcategory,"/").concat(G.id))}))}catch(n){console.log(n)}else if(void 0===g)try{t((0,l.uP)(G.category)).then((function(e){var t=e.payload.data.map((function(e){return e.color})),n=t.filter((function(e,n){return t.indexOf(e)===n}));de(n);var c=e.payload.data.map((function(e){return e.type})),a=c.filter((function(e,t){return c.indexOf(e)===t}));me(a);var i=e.payload.data.filter((function(e){return!0===e.active}));M(i);var o=(0,r.Z)(i).sort((function(e,t){return e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")-t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")}));A(o)}))}catch(n){console.log(n)}else try{t((0,l.uP)(g)).then((function(e){var t=e.payload.data.map((function(e){return e.color})),n=t.filter((function(e,n){return t.indexOf(e)===n}));de(n);var c=e.payload.data.map((function(e){return e.type})),a=c.filter((function(e,t){return c.indexOf(e)===t}));me(a);var i=e.payload.data.filter((function(e){return!0===e.active}));M(i);var o=(0,r.Z)(i).sort((function(e,t){return e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")-t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")}));A(o)}))}catch(n){console.log(n)}}),[t,g]),(0,o.useEffect)((function(){if(0!==Object.keys(k).length)if(0===ne.length&&0===ie.length){var e=(0,r.Z)(k).sort((function(e,t){return e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")-t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")}));A(e)}else if(0===ne.length&&ie.length>0){var t,n=[],a=(0,c.Z)(ie);try{var i=function(){var e=t.value,c=k.filter((function(t){return t.type===e}));n.push.apply(n,(0,r.Z)(c))};for(a.s();!(t=a.n()).done;)i()}catch(N){a.e(N)}finally{a.f()}if("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"!==Y){if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===Y){var o=[].concat(n).sort((function(e,t){return e.price-t.price}));A(o)}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===Y){var s=[].concat(n).sort((function(e,t){return t.price-e.price}));A(s)}}else A(n)}else if(0===ie.length&&ne.length>0){var l,u=[],d=(0,c.Z)(ne);try{var f=function(){var e=l.value,t=k.filter((function(t){return t.color===e}));u.push.apply(u,(0,r.Z)(t))};for(d.s();!(l=d.n()).done;)f()}catch(N){d.e(N)}finally{d.f()}if("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"!==Y){if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===Y){var p=[].concat(u).sort((function(e,t){return e.price-t.price}));A(p)}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===Y){var _=[].concat(u).sort((function(e,t){return t.price-e.price}));A(_)}}else A(u)}else if(ie.length>0&&ne.length>0){var m,h=[],v=(0,c.Z)(ne);try{var y=function(){var e=m.value,t=k.filter((function(t){return t.color===e}));h.push.apply(h,(0,r.Z)(t))};for(v.s();!(m=v.n()).done;)y()}catch(N){v.e(N)}finally{v.f()}var g,x=[],b=(0,c.Z)(ie);try{var j=function(){var e=g.value,t=h.filter((function(t){return t.type===e}));if(x.push.apply(x,(0,r.Z)(t)),"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"!==Y){if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===Y){var n=[].concat(x).sort((function(e,t){return e.price-t.price}));A(n)}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===Y){var c=[].concat(x).sort((function(e,t){return t.price-e.price}));A(c)}}else A(x)};for(b.s();!(g=b.n()).done;)j()}catch(N){b.e(N)}finally{b.f()}}}),[ne,ie]);var ve=function(e){var t=e.target.value;if("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"===t){var n=(0,r.Z)(S).sort((function(e,t){return e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")-t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")}));A(n),$("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c")}else if("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"===t){var c=(0,r.Z)(S).sort((function(e,t){return t.price-e.price}));A(c),$("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445")}else if("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"===t){var a=(0,r.Z)(S).sort((function(e,t){return e.price-t.price}));A(a),$("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445")}},ye=function(e){var t=e.target.value;if(ne.includes(t)){var n=ne.filter((function(e){return e!==t}));ce(n)}else 0===ne.length?ce([t]):ce([].concat((0,r.Z)(ne),[t]))},ge=function(e){var t=e.target.value;if(ie.includes(t)){var n=ie.filter((function(e){return e!==t}));oe(n)}else 0===ie.length?oe([t]):oe([].concat((0,r.Z)(ie),[t]))};return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:m.container,children:!0===n?(0,y.jsx)(u.Z,{}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:m.product_container,children:[0!==Object.keys(S).length&&(0,y.jsxs)("div",{className:m.filter_container,ref:he,children:[(0,y.jsxs)("div",{className:m.filters,children:[(0,y.jsxs)("p",{className:m.filter_name,children:[(0,y.jsx)(v.wrD,{className:m.icon_filter}),"\u0437\u0430 \u0446\u0456\u043d\u043e\u044e:"]}),(0,y.jsx)("button",{type:"button",onClick:function(){X(!T),H(!1),W(!1)},className:m.button_sort,children:(0,y.jsx)(h.G_S,{className:m.down_allow})}),T&&(0,y.jsx)("div",{className:T?m.priceMenuActive:m.priceMenu,children:(0,y.jsxs)("ul",{className:m.menu_list,children:[(0,y.jsxs)("li",{className:m.item_color,children:[(0,y.jsx)("input",{className:m.radio_button,type:"radio",value:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",name:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",id:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",onChange:ve,checked:Y.includes("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c")}),(0,y.jsx)("span",{className:m.custom_button}),(0,y.jsx)("label",{htmlFor:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",className:m.subtitle,children:"\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"})]}),(0,y.jsxs)("li",{className:m.item_color,children:[(0,y.jsx)("input",{className:m.radio_button,type:"radio",value:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",name:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",id:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",onChange:ve,checked:Y.includes("\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445")}),(0,y.jsx)("span",{className:m.custom_button}),(0,y.jsx)("label",{htmlFor:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445",className:m.subtitle,children:"\u0412\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445 \u0434\u043e \u0434\u043e\u0440\u043e\u0433\u0438\u0445"})]}),(0,y.jsxs)("li",{className:m.item_color,children:[(0,y.jsx)("input",{className:m.radio_button,type:"radio",value:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",name:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",id:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",onChange:ve,checked:Y.includes("\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445")}),(0,y.jsx)("span",{className:m.custom_button}),(0,y.jsx)("label",{htmlFor:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445",className:m.subtitle,children:"\u0412\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u0434\u043e \u0434\u0435\u0448\u0435\u0432\u0438\u0445"})]})]})})]}),(0,y.jsxs)("div",{className:m.filters,children:[(0,y.jsxs)("p",{className:m.filter_name,children:[(0,y.jsx)(v.wrD,{className:m.icon_filter}),"\u0437\u0430 \u043a\u043e\u043b\u044c\u043e\u0440\u043e\u043c:"]}),(0,y.jsx)("button",{type:"button",className:m.button_sort,onClick:function(){H(!z),W(!1),X(!1)},children:(0,y.jsx)(h.G_S,{className:m.down_allow})}),(0,y.jsx)("div",{className:z?m.colorMenuActive:m.colorMenu,children:(0,y.jsx)("ul",{className:m.menu_list,children:ue.map((function(e){return(0,y.jsxs)("li",{className:m.item_color,children:[(0,y.jsx)("input",{className:m.radio_button,type:"checkbox",value:e,name:e,id:e,onChange:ye,checked:ne.includes(e)}),(0,y.jsx)("span",{className:m.custom_button}),(0,y.jsx)("label",{htmlFor:e,className:m.subtitle,children:e})]},e)}))})})]}),(0,y.jsxs)("div",{className:m.filters,children:[(0,y.jsxs)("p",{className:m.filter_name,children:[(0,y.jsx)(v.wrD,{className:m.icon_filter}),"\u0437\u0430 \u0444\u0430\u0441\u0443\u0432\u0430\u043d\u043d\u044f\u043c:"]}),(0,y.jsx)("button",{type:"button",className:m.button_sort,onClick:function(){W(!V),H(!1),X(!1)},children:(0,y.jsx)(h.G_S,{className:m.down_allow})}),(0,y.jsx)("div",{className:V?m.typeMenuActive:m.typeMenu,children:(0,y.jsx)("ul",{className:m.menu_list,children:_e.map((function(e){return(0,y.jsxs)("li",{className:m.item_color,children:[(0,y.jsx)("input",{className:m.radio_button,type:"checkbox",value:e,name:e,id:e,onChange:ge,checked:ie.includes(e)}),(0,y.jsx)("span",{className:m.custom_button}),(0,y.jsx)("label",{htmlFor:e,className:m.subtitle,children:e})]},e)}))})})]}),(0,y.jsx)("button",{type:"button",className:m.button_cancel,onClick:function(){var e=(0,r.Z)(k).sort((function(e,t){return e.type.substring(0,e.type.indexOf(" ")).split(/,/).join(".")-t.type.substring(0,t.type.indexOf(" ")).split(/,/).join(".")}));A(e),$("\u0417\u0430 \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c"),X(!1),ce([]),H(!1),oe([]),W(!1)},children:"C\u043a\u0438\u043d\u0443\u0442\u0438 \u0432\u0441\u0456 \u0444\u0456\u043b\u044c\u0442\u0440\u0438"})]}),0!==Object.keys(S).length?(0,y.jsx)(d.Z,{productList:S,fetchProduct:function(t){N(t),U(!0),void 0===e.subcategory?D("/catalog/".concat(e.category,"/").concat(e.category,"/").concat(t._id)):D("/catalog/".concat(e.category,"/").concat(e.subcategory,"/").concat(t._id))}}):(0,y.jsx)("p",{})]}),(0,y.jsx)(p.Z,{modalActive:F,setModalActive:U,product:j}),(0,y.jsx)(_.Z,{})]})})})}},9325:function(e,t,n){n.d(t,{h:function(){return c}});var c=function(e){return e.product.loading}}}]);
//# sourceMappingURL=155.14b5dda9.chunk.js.map